var Drupal=Drupal||{settings:{},behaviors:{},themes:{},locale:{}};Drupal.jsEnabled=true;Drupal.attachBehaviors=function(a){a=a||document;jQuery.each(Drupal.behaviors,function(){this(a)})};Drupal.checkPlain=function(d){d=String(d);
var a={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};for(var c in a){var b=new RegExp(c,"g");d=d.replace(b,a[c])}return d};Drupal.t=function(c,a){if(Drupal.locale.strings&&Drupal.locale.strings[c]){c=Drupal.locale.strings[c]
}if(a){for(var b in a){switch(b.charAt(0)){case"@":a[b]=Drupal.checkPlain(a[b]);break;case"!":break;case"%":default:a[b]=Drupal.theme("placeholder",a[b]);break}c=c.replace(b,a[b])}}return c};Drupal.formatPlural=function(e,d,c,b){var b=b||{};
b["@count"]=e;var a=Drupal.locale.pluralFormula?Drupal.locale.pluralFormula(b["@count"]):((b["@count"]==1)?0:1);if(a==0){return Drupal.t(d,b)}else{if(a==1){return Drupal.t(c,b)}else{b["@count["+a+"]"]=b["@count"];
delete b["@count"];return Drupal.t(c.replace("@count","@count["+a+"]"))}}};Drupal.theme=function(c){for(var b=1,a=[];b<arguments.length;b++){a.push(arguments[b])}return(Drupal.theme[c]||Drupal.theme.prototype[c]).apply(this,a)
};Drupal.parseJson=function(data){if((data.substring(0,1)!="{")&&(data.substring(0,1)!="[")){return{status:0,data:data.length?data:Drupal.t("Unspecified error")}}return eval("("+data+");")};Drupal.freezeHeight=function(){Drupal.unfreezeHeight();
var a=document.createElement("div");$(a).css({position:"absolute",top:"0px",left:"0px",width:"1px",height:$("body").css("height")}).attr("id","freeze-height");$("body").append(a)};Drupal.unfreezeHeight=function(){$("#freeze-height").remove()
};Drupal.encodeURIComponent=function(b,a){a=a||location.href;b=encodeURIComponent(b).replace(/%2F/g,"/");return(a.indexOf("?q=")!=-1)?b:b.replace(/%26/g,"%2526").replace(/%23/g,"%2523").replace(/\/\//g,"/%252F")
};Drupal.getSelection=function(d){if(typeof(d.selectionStart)!="number"&&document.selection){var c=document.selection.createRange();var a=c.duplicate();a.moveToElementText(d);a.setEndPoint("EndToEnd",c);
var e=a.text.length-c.text.length;var b=e+c.text.length;return{start:e,end:b}}return{start:d.selectionStart,end:d.selectionEnd}};Drupal.ahahError=function(a,c){if(a.status==200){if(jQuery.trim(a.responseText)){var b=Drupal.t("An error occurred. \n@uri\n@text",{"@uri":c,"@text":a.responseText})
}else{var b=Drupal.t("An error occurred. \n@uri\n(no information available).",{"@uri":c})}}else{var b=Drupal.t("An HTTP error @status occurred. \n@uri",{"@uri":c,"@status":a.status})}return b.replace(/\n/g,"<br />")
};$(document.documentElement).addClass("js");$(document).ready(function(){Drupal.attachBehaviors(this)});Drupal.theme.prototype={placeholder:function(a){return"<em>"+Drupal.checkPlain(a)+"</em>"}};/*
 * jQuery Form Plugin; v20130711
 * http://jquery.malsup.com/form/
 * Copyright (c) 2013 M. Alsup; Dual licensed: MIT/GPL
 * https://github.com/malsup/form#copyright-and-license
 */
;(function(e){"use strict";function t(t){var r=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(r))}function r(t){var r=t.target,a=e(r);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;r=n[0]}var i=this;if(i.clk=r,"image"==r.type)if(void 0!==t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=a.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n={};n.fileapi=void 0!==e("<input type='file'/>").get(0).files,n.formdata=void 0!==window.FormData;var i=!!e.fn.prop;e.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function r(r){var a,n,i=e.param(r,t.traditional).split("&"),o=i.length,s=[];for(a=0;o>a;a++)i[a]=i[a].replace(/\+/g," "),n=i[a].split("="),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return s}function o(a){for(var n=new FormData,i=0;a.length>i;i++)n.append(a[i].name,a[i].value);if(t.extraData){var o=r(t.extraData);for(i=0;o.length>i;i++)o[i]&&n.append(o[i][0],o[i][1])}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:u||"POST"});t.uploadProgress&&(s.xhr=function(){var r=e.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(e){var r=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(r=Math.ceil(100*(a/n))),t.uploadProgress(e,a,n,r)},!1),r}),s.data=null;var l=s.beforeSend;return s.beforeSend=function(e,t){t.data=n,l&&l.call(this,e,t)},e.ajax(s)}function s(r){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(r){a("cannot get iframe.contentWindow document: "+r)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(r){a("cannot get iframe.contentDocument: "+r),t=e.document}return t}function o(){function t(){try{var e=n(g).readyState;a("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(r){a("Server abort: ",r," (",r.name,")"),s(D),j&&clearTimeout(j),j=void 0}}var r=f.attr2("target"),i=f.attr2("action");w.setAttribute("target",d),u||w.setAttribute("method","POST"),i!=m.url&&w.setAttribute("action",m.url),m.skipEncodingOverride||u&&!/post/i.test(u)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(j=setTimeout(function(){T=!0,s(k)},m.timeout));var o=[];try{if(m.extraData)for(var l in m.extraData)m.extraData.hasOwnProperty(l)&&(e.isPlainObject(m.extraData[l])&&m.extraData[l].hasOwnProperty("name")&&m.extraData[l].hasOwnProperty("value")?o.push(e('<input type="hidden" name="'+m.extraData[l].name+'">').val(m.extraData[l].value).appendTo(w)[0]):o.push(e('<input type="hidden" name="'+l+'">').val(m.extraData[l]).appendTo(w)[0]));m.iframeTarget||(v.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1)),setTimeout(t,15);try{w.submit()}catch(c){var p=document.createElement("form").submit;p.apply(w)}}finally{w.setAttribute("action",i),r?w.setAttribute("target",r):f.removeAttr("target"),e(o).remove()}}function s(t){if(!x.aborted&&!F){if(M=n(g),M||(a("cannot access response document"),t=D),t===k&&x)return x.abort("timeout"),S.reject(x,"timeout"),void 0;if(t==D&&x)return x.abort("server abort"),S.reject(x,"error","server abort"),void 0;if(M&&M.location.href!=m.iframeSrc||T){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var r,i="success";try{if(T)throw"timeout";var o="xml"==m.dataType||M.XMLDocument||e.isXMLDoc(M);if(a("isXml="+o),!o&&window.opera&&(null===M.body||!M.body.innerHTML)&&--O)return a("requeing onLoad callback, DOM not available"),setTimeout(s,250),void 0;var u=M.body?M.body:M.documentElement;x.responseText=u?u.innerHTML:null,x.responseXML=M.XMLDocument?M.XMLDocument:M,o&&(m.dataType="xml"),x.getResponseHeader=function(e){var t={"content-type":m.dataType};return t[e]},u&&(x.status=Number(u.getAttribute("status"))||x.status,x.statusText=u.getAttribute("statusText")||x.statusText);var l=(m.dataType||"").toLowerCase(),c=/(json|script|text)/.test(l);if(c||m.textarea){var f=M.getElementsByTagName("textarea")[0];if(f)x.responseText=f.value,x.status=Number(f.getAttribute("status"))||x.status,x.statusText=f.getAttribute("statusText")||x.statusText;else if(c){var d=M.getElementsByTagName("pre")[0],h=M.getElementsByTagName("body")[0];d?x.responseText=d.textContent?d.textContent:d.innerText:h&&(x.responseText=h.textContent?h.textContent:h.innerText)}}else"xml"==l&&!x.responseXML&&x.responseText&&(x.responseXML=X(x.responseText));try{L=_(x,l,m)}catch(b){i="parsererror",x.error=r=b||i}}catch(b){a("error caught: ",b),i="error",x.error=r=b||i}x.aborted&&(a("upload aborted"),i=null),x.status&&(i=x.status>=200&&300>x.status||304===x.status?"success":"error"),"success"===i?(m.success&&m.success.call(m.context,L,"success",x),S.resolve(x.responseText,"success",x),p&&e.event.trigger("ajaxSuccess",[x,m])):i&&(void 0===r&&(r=x.statusText),m.error&&m.error.call(m.context,x,i,r),S.reject(x,"error",r),p&&e.event.trigger("ajaxError",[x,m,r])),p&&e.event.trigger("ajaxComplete",[x,m]),p&&!--e.active&&e.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,x,i),F=!0,m.timeout&&clearTimeout(j),setTimeout(function(){m.iframeTarget||v.remove(),x.responseXML=null},100)}}}var l,c,m,p,d,v,g,x,b,y,T,j,w=f[0],S=e.Deferred();if(r)for(c=0;h.length>c;c++)l=e(h[c]),i?l.prop("disabled",!1):l.removeAttr("disabled");if(m=e.extend(!0,{},e.ajaxSettings,t),m.context=m.context||m,d="jqFormIO"+(new Date).getTime(),m.iframeTarget?(v=e(m.iframeTarget),y=v.attr2("name"),y?d=y:v.attr2("name",d)):(v=e('<iframe name="'+d+'" src="'+m.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var r="timeout"===t?"timeout":"aborted";a("aborting upload... "+r),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(n){}v.attr("src",m.iframeSrc),x.error=r,m.error&&m.error.call(m.context,x,r,t),p&&e.event.trigger("ajaxError",[x,m,r]),m.complete&&m.complete.call(m.context,x,r)}},p=m.global,p&&0===e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[x,m]),m.beforeSend&&m.beforeSend.call(m.context,x,m)===!1)return m.global&&e.active--,S.reject(),S;if(x.aborted)return S.reject(),S;b=w.clk,b&&(y=b.name,y&&!b.disabled&&(m.extraData=m.extraData||{},m.extraData[y]=b.value,"image"==b.type&&(m.extraData[y+".x"]=w.clk_x,m.extraData[y+".y"]=w.clk_y)));var k=1,D=2,A=e("meta[name=csrf-token]").attr("content"),E=e("meta[name=csrf-param]").attr("content");E&&A&&(m.extraData=m.extraData||{},m.extraData[E]=A),m.forceSync?o():setTimeout(o,10);var L,M,F,O=50,X=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},C=e.parseJSON||function(e){return window.eval("("+e+")")},_=function(t,r,a){var n=t.getResponseHeader("content-type")||"",i="xml"===r||!r&&n.indexOf("xml")>=0,o=i?t.responseXML:t.responseText;return i&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,r)),"string"==typeof o&&("json"===r||!r&&n.indexOf("json")>=0?o=C(o):("script"===r||!r&&n.indexOf("javascript")>=0)&&e.globalEval(o)),o};return S}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var u,l,c,f=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),u=t.type||this.attr2("method"),l=t.url||this.attr2("action"),c="string"==typeof l?e.trim(l):"",c=c||window.location.href||"",c&&(c=(c.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:c,success:e.ajaxSettings.success,type:u||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var m={};if(this.trigger("form-pre-serialize",[this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=t.traditional;void 0===p&&(p=e.ajaxSettings.traditional);var d,h=[],v=this.formToArray(t.semantic,h);if(t.data&&(t.extraData=t.data,d=e.param(t.data,p)),t.beforeSubmit&&t.beforeSubmit(v,this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=e.param(v,p);d&&(g=g?g+"&"+d:d),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+g,t.data=null):t.data=g;var x=[];if(t.resetForm&&x.push(function(){f.resetForm()}),t.clearForm&&x.push(function(){f.clearForm(t.includeHidden)}),!t.dataType&&t.target){var b=t.success||function(){};x.push(function(r){var a=t.replaceTarget?"replaceWith":"html";e(t.target)[a](r).each(b,arguments)})}else t.success&&x.push(t.success);if(t.success=function(e,r,a){for(var n=t.context||this,i=0,o=x.length;o>i;i++)x[i].apply(n,[e,r,a||f,f])},t.error){var y=t.error;t.error=function(e,r,a){var n=t.context||this;y.apply(n,[e,r,a,f])}}if(t.complete){var T=t.complete;t.complete=function(e,r){var a=t.context||this;T.apply(a,[e,r,f])}}var j=e('input[type=file]:enabled[value!=""]',this),w=j.length>0,S="multipart/form-data",k=f.attr("enctype")==S||f.attr("encoding")==S,D=n.fileapi&&n.formdata;a("fileAPI :"+D);var A,E=(w||k)&&!D;t.iframe!==!1&&(t.iframe||E)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){A=s(v)}):A=s(v):A=(w||k)&&D?o(v):e.ajax(t),f.removeData("jqxhr").data("jqxhr",A);for(var L=0;h.length>L;L++)h[L]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(n){if(n=n||{},n.delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(a("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return n.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,n,t).on("click.form-plugin",this.selector,n,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",n,t).bind("click.form-plugin",n,r)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,r){var a=[];if(0===this.length)return a;var i=this[0],o=t?i.getElementsByTagName("*"):i.elements;if(!o)return a;var s,u,l,c,f,m,p;for(s=0,m=o.length;m>s;s++)if(f=o[s],l=f.name,l&&!f.disabled)if(t&&i.clk&&"image"==f.type)i.clk==f&&(a.push({name:l,value:e(f).val(),type:f.type}),a.push({name:l+".x",value:i.clk_x},{name:l+".y",value:i.clk_y}));else if(c=e.fieldValue(f,!0),c&&c.constructor==Array)for(r&&r.push(f),u=0,p=c.length;p>u;u++)a.push({name:l,value:c[u]});else if(n.fileapi&&"file"==f.type){r&&r.push(f);var d=f.files;if(d.length)for(u=0;d.length>u;u++)a.push({name:l,value:d[u],type:f.type});else a.push({name:l,value:"",type:f.type})}else null!==c&&c!==void 0&&(r&&r.push(f),a.push({name:l,value:c,type:f.type,required:f.required}));if(!t&&i.clk){var h=e(i.clk),v=h[0];l=v.name,l&&!v.disabled&&"image"==v.type&&(a.push({name:l,value:h.val()}),a.push({name:l+".x",value:i.clk_x},{name:l+".y",value:i.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var r=[];return this.each(function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var i=0,o=n.length;o>i;i++)r.push({name:a,value:n[i]});else null!==n&&n!==void 0&&r.push({name:this.name,value:n})}}),e.param(r)},e.fn.fieldValue=function(t){for(var r=[],a=0,n=this.length;n>a;a++){var i=this[a],o=e.fieldValue(i,t);null===o||void 0===o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(r,o):r.push(o))}return r},e.fieldValue=function(t,r){var a=t.name,n=t.type,i=t.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!a||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==i&&-1==t.selectedIndex))return null;if("select"==i){var o=t.selectedIndex;if(0>o)return null;for(var s=[],u=t.options,l="select-one"==n,c=l?o+1:u.length,f=l?o:0;c>f;f++){var m=u[f];if(m.selected){var p=m.value;if(p||(p=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),l)return p;s.push(p)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();r.test(a)||"textarea"==n?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type;if("checkbox"==r||"radio"==r)this.checked=t;else if("option"==this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1})(jQuery);(function(){var u=0,p=[],n={},r={},z={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},o=/[<>&\"\']/g,y,x=window.setTimeout,w={},v;function s(){this.returnValue=false}function q(){this.cancelBubble=true
}(function(e){var d=e.split(/,/),c,a,b;for(c=0;c<d.length;c+=2){b=d[c+1].split(/ /);for(a=0;a<b.length;a++){r[b[a]]=d[c]}}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");
var t={VERSION:"1.5.7",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:r,ua:(function(){var b=navigator,c=b.userAgent,a=b.vendor,e,f,d;
e=/WebKit/.test(c);d=e&&a.indexOf("Apple")!==-1;f=window.opera&&window.opera.buildNumber;return{windows:navigator.platform.indexOf("Win")!==-1,android:/Android/.test(c),ie:!e&&!f&&(/MSIE/gi).test(c)&&(/Explorer/gi).test(b.appName),webkit:e,gecko:!e&&/Gecko/.test(c),safari:d,opera:!!f}
}()),typeOf:function(a){return({}).toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(a){t.each(arguments,function(c,b){if(b>0){t.each(c,function(d,e){a[e]=d})}});return a},cleanName:function(c){var b,a;
a=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];
for(b=0;b<a.length;b+=2){c=c.replace(a[b],a[b+1])}c=c.replace(/\s+/g,"_");c=c.replace(/[^a-z0-9_\-\.]+/gi,"");return c},addRuntime:function(b,a){a.name=b;p[b]=a;p.push(a);return a},guid:function(){var b=new Date().getTime().toString(32),a;
for(a=0;a<5;a++){b+=Math.floor(Math.random()*65535).toString(32)}return(t.guidPrefix||"p")+b+(u++).toString(32)},buildUrl:function(b,c){var a="";t.each(c,function(d,e){a+=(a?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(d)
});if(a){b+=(b.indexOf("?")>0?"&":"?")+a}return b},each:function(b,a){var c,d,e;if(b){c=b.length;if(c===y){for(d in b){if(b.hasOwnProperty(d)){if(a(b[d],d)===false){return}}}}else{for(e=0;e<c;e++){if(a(b[e],e)===false){return
}}}}},formatSize:function(a){if(a===y||/\D/.test(a)){return t.translate("N/A")}if(a>1073741824){return Math.round(a/1073741824,1)+" GB"}if(a>1048576){return Math.round(a/1048576,1)+" MB"}if(a>1024){return Math.round(a/1024,1)+" KB"
}return a+" b"},getPos:function(d,i){var h=0,a=0,f,g=document,c,b;d=d;i=i||g.body;function e(D){var m,j,k=0,l=0;if(D){j=D.getBoundingClientRect();m=g.compatMode==="CSS1Compat"?g.documentElement:g.body;
k=j.left+m.scrollLeft;l=j.top+m.scrollTop}return{x:k,y:l}}if(d&&d.getBoundingClientRect&&t.ua.ie&&(!g.documentMode||g.documentMode<8)){c=e(d);b=e(i);return{x:c.x-b.x,y:c.y-b.y}}f=d;while(f&&f!=i&&f.nodeType){h+=f.offsetLeft||0;
a+=f.offsetTop||0;f=f.offsetParent}f=d.parentNode;while(f&&f!=i&&f.nodeType){h-=f.scrollLeft||0;a-=f.scrollTop||0;f=f.parentNode}return{x:h,y:a}},getSize:function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}
},parseSize:function(b){var a;if(typeof(b)=="string"){b=/^([0-9]+)([mgk]?)$/.exec(b.toLowerCase().replace(/[^0-9mkg]/g,""));a=b[2];b=+b[1];if(a=="g"){b*=1073741824}if(a=="m"){b*=1048576}if(a=="k"){b*=1024
}}return b},xmlEncode:function(a){return a?(""+a).replace(o,function(b){return z[b]?"&"+z[b]+";":b}):a},toArray:function(a){var b,c=[];for(b=0;b<a.length;b++){c[b]=a[b]}return c},inArray:function(b,a){if(a){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(a,b)
}for(var d=0,c=a.length;d<c;d++){if(a[d]===b){return d}}}return -1},addI18n:function(a){return t.extend(n,a)},translate:function(a){return n[a]||a},isEmptyObj:function(b){if(b===y){return true}for(var a in b){return false
}return true},hasClass:function(a,b){var c;if(a.className==""){return false}c=new RegExp("(^|\\s+)"+b+"(\\s+|$)");return c.test(a.className)},addClass:function(a,b){if(!t.hasClass(a,b)){a.className=a.className==""?b:a.className.replace(/\s+$/,"")+" "+b
}},removeClass:function(a,b){var c=new RegExp("(^|\\s+)"+b+"(\\s+|$)");a.className=a.className.replace(c,function(e,f,d){return f===" "&&d===" "?" ":""})},getStyle:function(a,b){if(a.currentStyle){return a.currentStyle[b]
}else{if(window.getComputedStyle){return window.getComputedStyle(a,null)[b]}}},addEvent:function(b,g,a){var c,d,e,f;f=arguments[3];g=g.toLowerCase();if(v===y){v="Plupload_"+t.guid()}if(b.addEventListener){c=a;
b.addEventListener(g,c,false)}else{if(b.attachEvent){c=function(){var h=window.event;if(!h.target){h.target=h.srcElement}h.preventDefault=s;h.stopPropagation=q;a(h)};b.attachEvent("on"+g,c)}}if(b[v]===y){b[v]=t.guid()
}if(!w.hasOwnProperty(b[v])){w[b[v]]={}}d=w[b[v]];if(!d.hasOwnProperty(g)){d[g]=[]}d[g].push({func:c,orig:a,key:f})},removeEvent:function(b,g){var d,a,e;if(typeof(arguments[2])=="function"){a=arguments[2]
}else{e=arguments[2]}g=g.toLowerCase();if(b[v]&&w[b[v]]&&w[b[v]][g]){d=w[b[v]][g]}else{return}for(var f=d.length-1;f>=0;f--){if(d[f].key===e||d[f].orig===a){if(b.removeEventListener){b.removeEventListener(g,d[f].func,false)
}else{if(b.detachEvent){b.detachEvent("on"+g,d[f].func)}}d[f].orig=null;d[f].func=null;d.splice(f,1);if(a!==y){break}}}if(!d.length){delete w[b[v]][g]}if(t.isEmptyObj(w[b[v]])){delete w[b[v]];try{delete b[v]
}catch(c){b[v]=y}}},removeAllEvents:function(a){var b=arguments[1];if(a[v]===y||!a[v]){return}t.each(w[a[v]],function(c,d){t.removeEvent(a,d,b)})}};t.Uploader=function(d){var g={},a,b=[],e,f=false;a=new t.QueueProgress();
d=t.extend({chunk_size:0,multipart:true,multi_selection:true,file_data_name:"file",filters:[]},d);function c(){var j,i=0,k;if(this.state==t.STARTED){for(k=0;k<b.length;k++){if(!j&&b[k].status==t.QUEUED){j=b[k];
j.status=t.UPLOADING;if(this.trigger("BeforeUpload",j)){this.trigger("UploadFile",j)}}else{i++}}if(i==b.length){this.stop();this.trigger("UploadComplete",b)}}}function h(){var i,j;a.reset();for(i=0;i<b.length;
i++){j=b[i];if(j.size!==y){a.size+=j.size;a.loaded+=j.loaded}else{a.size=y}if(j.status==t.DONE){a.uploaded++}else{if(j.status==t.FAILED){a.failed++}else{a.queued++}}}if(a.size===y){a.percent=b.length>0?Math.ceil(a.uploaded/b.length*100):0
}else{a.bytesPerSec=Math.ceil(a.loaded/((+new Date()-e||1)/1000));a.percent=a.size>0?Math.ceil(a.loaded/a.size*100):0}}t.extend(this,{state:t.STOPPED,runtime:"",features:{},files:b,settings:d,total:a,id:t.guid(),init:function(){var j=this,D,i,k,m=0,C;
if(typeof(d.preinit)=="function"){d.preinit(j)}else{t.each(d.preinit,function(A,B){j.bind(B,A)})}d.page_url=d.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(d.url)){d.url=d.page_url+d.url
}d.chunk_size=t.parseSize(d.chunk_size);d.max_file_size=t.parseSize(d.max_file_size);j.bind("FilesAdded",function(N,K){var L,M,B=0,A,J=d.filters;if(J&&J.length){A=[];t.each(J,function(E){t.each(E.extensions.split(/,/),function(F){if(/^\s*\*\s*$/.test(F)){A.push("\\.*")
}else{A.push("\\."+F.replace(new RegExp("["+("/^$.*+?|()[]{}\\".replace(/./g,"\\$&"))+"]","g"),"\\$&"))}})});A=new RegExp(A.join("|")+"$","i")}for(L=0;L<K.length;L++){M=K[L];M.loaded=0;M.percent=0;M.status=t.QUEUED;
if(A&&!A.test(M.name)){N.trigger("Error",{code:t.FILE_EXTENSION_ERROR,message:t.translate("File extension error."),file:M});continue}if(M.size!==y&&M.size>d.max_file_size){N.trigger("Error",{code:t.FILE_SIZE_ERROR,message:t.translate("File size error."),file:M});
continue}b.push(M);B++}if(B){x(function(){j.trigger("QueueChanged");j.refresh()},1)}else{return false}});if(d.unique_names){j.bind("UploadFile",function(H,G){var A=G.name.match(/\.([^.]+)$/),B="tmp";if(A){B=A[1]
}G.target_name=G.id+"."+B})}j.bind("UploadProgress",function(B,A){A.percent=A.size>0?Math.ceil(A.loaded/A.size*100):100;h()});j.bind("StateChanged",function(A){if(A.state==t.STARTED){e=(+new Date())}else{if(A.state==t.STOPPED){for(D=A.files.length-1;
D>=0;D--){if(A.files[D].status==t.UPLOADING){A.files[D].status=t.QUEUED;h()}}}}});j.bind("QueueChanged",h);j.bind("Error",function(B,A){if(A.file){A.file.status=t.FAILED;h();if(B.state==t.STARTED){x(function(){c.call(j)
},1)}}});j.bind("FileUploaded",function(B,A){A.status=t.DONE;A.loaded=A.size;B.trigger("UploadProgress",A);x(function(){c.call(j)},1)});if(d.runtimes){i=[];C=d.runtimes.split(/\s?,\s?/);for(D=0;D<C.length;
D++){if(p[C[D]]){i.push(p[C[D]])}}}else{i=p}function l(){var A=i[m++],B,H,G;if(A){B=A.getFeatures();H=j.settings.required_features;if(H){H=H.split(",");for(G=0;G<H.length;G++){if(!B[H[G]]){l();return}}}A.init(j,function(E){if(E&&E.success){j.features=B;
j.runtime=A.name;j.trigger("Init",{runtime:A.name});j.trigger("PostInit");j.refresh()}else{l()}})}else{j.trigger("Error",{code:t.INIT_ERROR,message:t.translate("Init error.")})}}l();if(typeof(d.init)=="function"){d.init(j)
}else{t.each(d.init,function(A,B){j.bind(B,A)})}},refresh:function(){this.trigger("Refresh")},start:function(){if(b.length&&this.state!=t.STARTED){this.state=t.STARTED;this.trigger("StateChanged");c.call(this)
}},stop:function(){if(this.state!=t.STOPPED){this.state=t.STOPPED;this.trigger("CancelUpload");this.trigger("StateChanged")}},disableBrowse:function(){f=arguments[0]!==y?arguments[0]:true;this.trigger("DisableBrowse",f)
},getFile:function(i){var j;for(j=b.length-1;j>=0;j--){if(b[j].id===i){return b[j]}}},removeFile:function(i){var j;for(j=b.length-1;j>=0;j--){if(b[j].id===i.id){return this.splice(j,1)[0]}}},splice:function(i,k){var j;
j=b.splice(i===y?0:i,k===y?b.length:k);this.trigger("FilesRemoved",j);this.trigger("QueueChanged");return j},trigger:function(j){var l=g[j.toLowerCase()],i,k;if(l){k=Array.prototype.slice.call(arguments);
k[0]=this;for(i=0;i<l.length;i++){if(l[i].func.apply(l[i].scope,k)===false){return false}}}return true},hasEventListener:function(i){return !!g[i.toLowerCase()]},bind:function(k,i,j){var l;k=k.toLowerCase();
l=g[k]||[];l.push({func:i,scope:j||this});g[k]=l},unbind:function(k){k=k.toLowerCase();var l=g[k],j,i=arguments[1];if(l){if(i!==y){for(j=l.length-1;j>=0;j--){if(l[j].func===i){l.splice(j,1);break}}}else{l=[]
}if(!l.length){delete g[k]}}},unbindAll:function(){var i=this;t.each(g,function(j,k){i.unbind(k)})},destroy:function(){this.stop();this.trigger("Destroy");this.unbindAll()}})};t.File=function(a,c,b){var d=this;
d.id=a;d.name=c;d.size=b;d.loaded=0;d.percent=0;d.status=0};t.Runtime=function(){this.getFeatures=function(){};this.init=function(b,a){}};t.QueueProgress=function(){var a=this;a.size=0;a.loaded=0;a.uploaded=0;
a.failed=0;a.queued=0;a.percent=0;a.bytesPerSec=0;a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}};t.runtimes={};window.plupload=t})();(function(v,t,u,y){var B={},w;function C(c){var d=c.naturalWidth,a=c.naturalHeight;if(d*a>1024*1024){var b=t.createElement("canvas");b.width=b.height=1;var e=b.getContext("2d");e.drawImage(c,-d+1,0);return e.getImageData(0,0,1,1).data[3]===0
}else{return false}}function z(j,a,d){var b=t.createElement("canvas");b.width=1;b.height=d;var c=b.getContext("2d");c.drawImage(j,0,0);var k=c.getImageData(0,0,1,d).data;var f=0;var h=d;var e=d;while(e>f){var l=k[(e-1)*4+3];
if(l===0){h=e}else{f=e}e=(h+f)>>1}var g=(e/d);return(g===0)?1:g}function r(a,p,o){var k=a.naturalWidth,b=a.naturalHeight;var n=o.width,O=o.height;var l=p.getContext("2d");l.save();var N=C(a);if(N){k/=2;
b/=2}var f=1024;var P=t.createElement("canvas");P.width=P.height=f;var m=P.getContext("2d");var j=z(a,k,b);var Q=0;while(Q<b){var d=Q+f>b?b-Q:f;var M=0;while(M<k){var L=M+f>k?k-M:f;m.clearRect(0,0,f,f);
m.drawImage(a,-M,-Q);var e=(M*n/k)<<0;var c=Math.ceil(L*n/k);var h=(Q*O/b/j)<<0;var g=Math.ceil(d*O/b/j);l.drawImage(P,0,0,L,d,e,h,c,g);M+=f}Q+=f}l.restore();P=m=null}function q(b,a){var c;if("FileReader" in v){c=new FileReader();
c.readAsDataURL(b);c.onload=function(){a(c.result)}}else{return a(b.getAsDataURL())}}function s(b,a){var c;if("FileReader" in v){c=new FileReader();c.readAsBinaryString(b);c.onload=function(){a(c.result)
}}else{return a(b.getAsBinary())}}function A(g,j,b,c){var h,a,d,f,e=this;q(B[g.id],function(k){h=t.createElement("canvas");h.style.display="none";t.body.appendChild(h);d=new Image();d.onerror=d.onabort=function(){c({success:false})
};d.onload=function(){var m,l,p,G,n;if(!j.width){j.width=d.width}if(!j.height){j.height=d.height}f=Math.min(j.width/d.width,j.height/d.height);if(f<1){m=Math.round(d.width*f);l=Math.round(d.height*f)}else{if(j.quality&&b==="image/jpeg"){m=d.width;
l=d.height}else{c({success:false});return}}h.width=m;h.height=l;r(d,h,{width:m,height:l});if(b==="image/jpeg"){G=new x(atob(k.substring(k.indexOf("base64,")+7)));if(G.headers&&G.headers.length){n=new E();
if(n.init(G.get("exif")[0])){n.setExif("PixelXDimension",m);n.setExif("PixelYDimension",l);G.set("exif",n.getBinary());if(e.hasEventListener("ExifData")){e.trigger("ExifData",g,n.EXIF())}if(e.hasEventListener("GpsData")){e.trigger("GpsData",g,n.GPS())
}}}}if(j.quality&&b==="image/jpeg"){try{k=h.toDataURL(b,j.quality/100)}catch(o){k=h.toDataURL(b)}}else{k=h.toDataURL(b)}k=k.substring(k.indexOf("base64,")+7);k=atob(k);if(G&&G.headers&&G.headers.length){k=G.restore(k);
G.purge()}h.parentNode.removeChild(h);c({success:true,data:k})};d.src=k})}u.runtimes.Html5=u.addRuntime("html5",{getFeatures:function(){var a,e,b,c,d,f;e=b=d=f=false;if(v.XMLHttpRequest){a=new XMLHttpRequest();
b=!!a.upload;e=!!(a.sendAsBinary||a.upload)}if(e){c=!!(a.sendAsBinary||(v.Uint8Array&&v.ArrayBuffer));d=!!(File&&(File.prototype.getAsDataURL||v.FileReader)&&c);f=!!(File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))
}w=u.ua.safari&&u.ua.windows;return{html5:e,dragdrop:(function(){var g=t.createElement("div");return("draggable" in g)||("ondragstart" in g&&"ondrop" in g)}()),jpgresize:d,pngresize:d,multipart:d||!!v.FileReader||!!v.FormData,canSendBinary:c,cantSendBlobInFormData:!!(u.ua.gecko&&v.FormData&&v.FileReader&&!FileReader.prototype.readAsArrayBuffer)||u.ua.android,progress:b,chunks:f,multi_selection:!(u.ua.safari&&u.ua.windows),triggerDialog:(u.ua.gecko&&v.FormData||u.ua.webkit)}
},init:function(c,a){var e,b;function d(k){var g,h,l=[],f,j={};for(h=0;h<k.length;h++){g=k[h];if(j[g.name]&&u.ua.safari&&u.ua.windows){continue}j[g.name]=true;f=u.guid();B[f]=g;l.push(new u.File(f,g.fileName||g.name,g.fileSize||g.size))
}if(l.length){c.trigger("FilesAdded",l)}}e=this.getFeatures();if(!e.html5){a({success:false});return}c.bind("Init",function(j){var l,n,M=[],k,L,o=j.settings.filters,m,N,K=t.body,p;l=t.createElement("div");
l.id=j.id+"_html5_container";u.extend(l.style,{position:"absolute",background:c.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:c.settings.shim_bgcolor?"":0});
l.className="plupload html5";if(c.settings.container){K=t.getElementById(c.settings.container);if(u.getStyle(K,"position")==="static"){K.style.position="relative"}}K.appendChild(l);no_type_restriction:for(k=0;
k<o.length;k++){m=o[k].extensions.split(/,/);for(L=0;L<m.length;L++){if(m[L]==="*"){M=[];break no_type_restriction}N=u.mimeTypes[m[L]];if(N&&u.inArray(N,M)===-1){M.push(N)}}}l.innerHTML='<input id="'+c.id+'_html5"  style="font-size:999px" type="file" accept="'+M.join(",")+'" '+(c.settings.multi_selection&&c.features.multi_selection?'multiple="multiple"':"")+" />";
l.scrollTop=100;p=t.getElementById(c.id+"_html5");if(j.features.triggerDialog){u.extend(p.style,{position:"absolute",width:"100%",height:"100%"})}else{u.extend(p.style,{cssFloat:"right",styleFloat:"right"})
}p.onchange=function(){d(this.files);this.value=""};n=t.getElementById(j.settings.browse_button);if(n){var g=j.settings.browse_button_hover,f=j.settings.browse_button_active,h=j.features.triggerDialog?n:l;
if(g){u.addEvent(h,"mouseover",function(){u.addClass(n,g)},j.id);u.addEvent(h,"mouseout",function(){u.removeClass(n,g)},j.id)}if(f){u.addEvent(h,"mousedown",function(){u.addClass(n,f)},j.id);u.addEvent(t.body,"mouseup",function(){u.removeClass(n,f)
},j.id)}if(j.features.triggerDialog){u.addEvent(n,"click",function(F){var G=t.getElementById(j.id+"_html5");if(G&&!G.disabled){G.click()}F.preventDefault()},j.id)}}});c.bind("PostInit",function(){var f=t.getElementById(c.settings.drop_element);
if(f){if(w){u.addEvent(f,"dragenter",function(j){var k,h,g;k=t.getElementById(c.id+"_drop");if(!k){k=t.createElement("input");k.setAttribute("type","file");k.setAttribute("id",c.id+"_drop");k.setAttribute("multiple","multiple");
u.addEvent(k,"change",function(){d(this.files);u.removeEvent(k,"change",c.id);k.parentNode.removeChild(k)},c.id);u.addEvent(k,"dragover",function(l){l.stopPropagation()},c.id);f.appendChild(k)}h=u.getPos(f,t.getElementById(c.settings.container));
g=u.getSize(f);if(u.getStyle(f,"position")==="static"){u.extend(f.style,{position:"relative"})}u.extend(k.style,{position:"absolute",display:"block",top:0,left:0,width:g.w+"px",height:g.h+"px",opacity:0})
},c.id);return}u.addEvent(f,"dragover",function(g){g.preventDefault()},c.id);u.addEvent(f,"drop",function(g){var h=g.dataTransfer;if(h&&h.files){d(h.files)}g.preventDefault()},c.id)}});c.bind("Refresh",function(j){var h,g,l,f,k;
h=t.getElementById(c.settings.browse_button);if(h){g=u.getPos(h,t.getElementById(j.settings.container));l=u.getSize(h);f=t.getElementById(c.id+"_html5_container");u.extend(f.style,{top:g.y+"px",left:g.x+"px",width:l.w+"px",height:l.h+"px"});
if(c.features.triggerDialog){if(u.getStyle(h,"position")==="static"){u.extend(h.style,{position:"relative"})}k=parseInt(u.getStyle(h,"zIndex"),10);if(isNaN(k)){k=0}u.extend(h.style,{zIndex:k});u.extend(f.style,{zIndex:k-1})
}}});c.bind("DisableBrowse",function(h,f){var g=t.getElementById(h.id+"_html5");if(g){g.disabled=f}});c.bind("CancelUpload",function(){if(b&&b.abort){b.abort()}});c.bind("UploadFile",function(j,g){var m=j.settings,l,h;
function f(H,n,I){var p;if(File.prototype.slice){try{H.slice();return H.slice(n,I)}catch(o){return H.slice(n,I-n)}}else{if(p=File.prototype.webkitSlice||File.prototype.mozSlice){return p.call(H,n,I)}else{return null
}}}function k(G){var n=0,o=0;function p(){var T,F,R,Q,U,S,X,Y=j.settings.url;function V(H){if(b.sendAsBinary){b.sendAsBinary(H)}else{if(j.features.canSendBinary){var J=new Uint8Array(H.length);for(var I=0;
I<H.length;I++){J[I]=(H.charCodeAt(I)&255)}b.send(J.buffer)}}}function W(M){var I=0,H="----pluploadboundary"+u.guid(),K,L="--",J="\r\n",N="";b=new XMLHttpRequest;if(b.upload){b.upload.onprogress=function(O){g.loaded=Math.min(g.size,o+O.loaded-I);
j.trigger("UploadProgress",g)}}b.onreadystatechange=function(){var aa,O;if(b.readyState==4&&j.state!==u.STOPPED){try{aa=b.status}catch(P){aa=0}if(aa>=400){j.trigger("Error",{code:u.HTTP_ERROR,message:u.translate("HTTP Error."),file:g,status:aa})
}else{if(R){O={chunk:n,chunks:R,response:b.responseText,status:aa};j.trigger("ChunkUploaded",g,O);o+=S;if(O.cancelled){g.status=u.FAILED;return}g.loaded=Math.min(g.size,(n+1)*U)}else{g.loaded=g.size}j.trigger("UploadProgress",g);
M=T=K=N=null;if(!R||++n>=R){g.status=u.DONE;j.trigger("FileUploaded",g,{response:b.responseText,status:aa})}else{p()}}}};if(j.settings.multipart&&e.multipart){Q.name=g.target_name||g.name;b.open("post",Y,true);
u.each(j.settings.headers,function(O,P){b.setRequestHeader(P,O)});if(typeof(M)!=="string"&&!!v.FormData){K=new FormData();u.each(u.extend(Q,j.settings.multipart_params),function(O,P){K.append(P,O)});K.append(j.settings.file_data_name,M);
b.send(K);return}if(typeof(M)==="string"){b.setRequestHeader("Content-Type","multipart/form-data; boundary="+H);u.each(u.extend(Q,j.settings.multipart_params),function(O,P){N+=L+H+J+'Content-Disposition: form-data; name="'+P+'"'+J+J;
N+=unescape(encodeURIComponent(O))+J});X=u.mimeTypes[g.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";N+=L+H+J+'Content-Disposition: form-data; name="'+j.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(g.name))+'"'+J+"Content-Type: "+X+J+J+M+J+L+H+L+J;
I=N.length-M.length;M=N;V(M);return}}Y=u.buildUrl(j.settings.url,u.extend(Q,j.settings.multipart_params));b.open("post",Y,true);b.setRequestHeader("Content-Type","application/octet-stream");u.each(j.settings.headers,function(O,P){b.setRequestHeader(P,O)
});if(typeof(M)==="string"){V(M)}else{b.send(M)}}if(g.status==u.DONE||g.status==u.FAILED||j.state==u.STOPPED){return}Q={name:g.target_name||g.name};if(m.chunk_size&&g.size>m.chunk_size&&(e.chunks||typeof(G)=="string")){U=m.chunk_size;
R=Math.ceil(g.size/U);S=Math.min(U,g.size-(n*U));if(typeof(G)=="string"){T=G.substring(n*U,n*U+S)}else{T=f(G,n*U,n*U+S)}Q.chunk=n;Q.chunks=R}else{S=g.size;T=G}if(j.settings.multipart&&e.multipart&&typeof(T)!=="string"&&v.FileReader&&e.cantSendBlobInFormData&&e.chunks&&j.settings.chunk_size){(function(){var H=new FileReader();
H.onload=function(){W(H.result);H=null};H.readAsBinaryString(T)}())}else{W(T)}}p()}l=B[g.id];if(e.jpgresize&&j.settings.resize&&/\.(png|jpg|jpeg)$/i.test(g.name)){A.call(j,g,j.settings.resize,/\.png$/i.test(g.name)?"image/png":"image/jpeg",function(n){if(n.success){g.size=n.data.length;
k(n.data)}else{if(e.chunks){k(l)}else{s(l,k)}}})}else{if(!e.chunks&&e.jpgresize){s(l,k)}else{k(l)}}});c.bind("Destroy",function(h){var f,k,g=t.body,j={inputContainer:h.id+"_html5_container",inputFile:h.id+"_html5",browseButton:h.settings.browse_button,dropElm:h.settings.drop_element};
for(f in j){k=t.getElementById(j[f]);if(k){u.removeAllEvents(k,h.id)}}u.removeAllEvents(t.body,h.id);if(h.settings.container){g=t.getElementById(h.settings.container)}g.removeChild(t.getElementById(j.inputContainer))
});a({success:true})}});function D(){var b=false,d;function a(g,k){var h=b?0:-8*(k-1),j=0,f;for(f=0;f<k;f++){j|=(d.charCodeAt(g+f)<<Math.abs(h+f*8))}return j}function e(f,h,g){var g=arguments.length===3?g:d.length-h-1;
d=d.substr(0,h)+f+d.substr(g+h)}function c(h,g,k){var f="",j=b?0:-8*(k-1),l;for(l=0;l<k;l++){f+=String.fromCharCode((g>>Math.abs(j+l*8))&255)}e(f,h,k)}return{II:function(f){if(f===y){return b}else{b=f}},init:function(f){b=false;
d=f},SEGMENT:function(h,f,g){switch(arguments.length){case 1:return d.substr(h,d.length-h-1);case 2:return d.substr(h,f);case 3:e(g,h,f);break;default:return d}},BYTE:function(f){return a(f,1)},SHORT:function(f){return a(f,2)
},LONG:function(g,f){if(f===y){return a(g,4)}else{c(g,f,4)}},SLONG:function(g){var f=a(g,4);return(f>2147483647?f-4294967296:f)},STRING:function(h,g){var f="";for(g+=h;h<g;h++){f+=String.fromCharCode(a(h,1))
}return f}}}function x(c){var a={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},b=[],d,h,f=y,e=0,g;
d=new D();d.init(c);if(d.SHORT(0)!==65496){return}h=2;g=Math.min(1048576,c.length);while(h<=g){f=d.SHORT(h);if(f>=65488&&f<=65495){h+=2;continue}if(f===65498||f===65497){break}e=d.SHORT(h+2)+2;if(a[f]&&d.STRING(h+4,a[f].signature.length)===a[f].signature){b.push({hex:f,app:a[f].app.toUpperCase(),name:a[f].name.toUpperCase(),start:h,length:e,segment:d.SEGMENT(h,e)})
}h+=e}d.init(null);return{headers:b,restore:function(n){d.init(n);var l=new x(n);if(!l.headers){return false}for(var j=l.headers.length;j>0;j--){var k=l.headers[j-1];d.SEGMENT(k.start,k.length,"")}l.purge();
h=d.SHORT(2)==65504?4+d.SHORT(4):2;for(var j=0,m=b.length;j<m;j++){d.SEGMENT(h,0,b[j].segment);h+=b[j].length}return d.SEGMENT()},get:function(j){var m=[];for(var k=0,l=b.length;k<l;k++){if(b[k].app===j.toUpperCase()){m.push(b[k].segment)
}}return m},set:function(n,j){var l=[];if(typeof(j)==="string"){l.push(j)}else{l=j}for(var k=ii=0,m=b.length;k<m;k++){if(b[k].app===n.toUpperCase()){b[k].segment=l[ii];b[k].length=l[ii].length;ii++}if(ii>=l.length){break
}}},purge:function(){b=[];d.init(null)}}}function E(){var d,g,f={},a;d=new D();g={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};
a={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};
function e(p,N){var m=d.SHORT(p),j,K,o,O,h,n,l,M,L=[],k={};for(j=0;j<m;j++){l=n=p+12*j+2;o=N[d.SHORT(l)];if(o===y){continue}O=d.SHORT(l+=2);h=d.LONG(l+=2);l+=4;L=[];switch(O){case 1:case 7:if(h>4){l=d.LONG(l)+f.tiffHeader
}for(K=0;K<h;K++){L[K]=d.BYTE(l+K)}break;case 2:if(h>4){l=d.LONG(l)+f.tiffHeader}k[o]=d.STRING(l,h-1);continue;case 3:if(h>2){l=d.LONG(l)+f.tiffHeader}for(K=0;K<h;K++){L[K]=d.SHORT(l+K*2)}break;case 4:if(h>1){l=d.LONG(l)+f.tiffHeader
}for(K=0;K<h;K++){L[K]=d.LONG(l+K*4)}break;case 5:l=d.LONG(l)+f.tiffHeader;for(K=0;K<h;K++){L[K]=d.LONG(l+K*4)/d.LONG(l+K*4+4)}break;case 9:l=d.LONG(l)+f.tiffHeader;for(K=0;K<h;K++){L[K]=d.SLONG(l+K*4)
}break;case 10:l=d.LONG(l)+f.tiffHeader;for(K=0;K<h;K++){L[K]=d.SLONG(l+K*4)/d.SLONG(l+K*4+4)}break;default:continue}M=(h==1?L[0]:L);if(a.hasOwnProperty(o)&&typeof M!="object"){k[o]=a[o][M]}else{k[o]=M
}}return k}function b(){var j=y,h=f.tiffHeader;d.II(d.SHORT(h)==18761);if(d.SHORT(h+=2)!==42){return false}f.IFD0=f.tiffHeader+d.LONG(h+=2);j=e(f.IFD0,g.tiff);f.exifIFD=("ExifIFDPointer" in j?f.tiffHeader+j.ExifIFDPointer:y);
f.gpsIFD=("GPSInfoIFDPointer" in j?f.tiffHeader+j.GPSInfoIFDPointer:y);return true}function c(n,j,m){var k,p,h,l=0;if(typeof(j)==="string"){var o=g[n.toLowerCase()];for(hex in o){if(o[hex]===j){j=hex;break
}}}k=f[n.toLowerCase()+"IFD"];p=d.SHORT(k);for(i=0;i<p;i++){h=k+12*i+2;if(d.SHORT(h)==j){l=h+8;break}}if(!l){return false}d.LONG(l,m);return true}return{init:function(h){f={tiffHeader:10};if(h===y||!h.length){return false
}d.init(h);if(d.SHORT(0)===65505&&d.STRING(4,5).toUpperCase()==="EXIF\0"){return b()}return false},EXIF:function(){var k;k=e(f.exifIFD,g.exif);if(k.ExifVersion&&u.typeOf(k.ExifVersion)==="array"){for(var j=0,h="";
j<k.ExifVersion.length;j++){h+=String.fromCharCode(k.ExifVersion[j])}k.ExifVersion=h}return k},GPS:function(){var h;h=e(f.gpsIFD,g.gps);if(h.GPSVersionID){h.GPSVersionID=h.GPSVersionID.join(".")}return h
},setExif:function(h,j){if(h!=="PixelXDimension"&&h!=="PixelYDimension"){return false}return c("exif",h,j)},getBinary:function(){return d.SEGMENT()}}}})(window,document,plupload);(function(k,h,m,l){var i={},j={};function n(){var c;try{c=navigator.plugins["Shockwave Flash"];c=c.description}catch(a){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(b){c="0.0"
}}c=c.match(/\d+/g);return parseFloat(c[0]+"."+c[1])}m.flash={trigger:function(a,c,b){setTimeout(function(){var d=i[a],e,f;if(d){d.trigger("Flash:"+c,b)}},0)}};m.runtimes.Flash=m.addRuntime("flash",{getFeatures:function(){return{jpgresize:true,pngresize:true,maxWidth:8091,maxHeight:8091,chunks:true,progress:true,multipart:true,multi_selection:true}
},init:function(a,g){var c,b,f=0,e=h.body;if(n()<10){g({success:false});return}j[a.id]=false;i[a.id]=a;c=h.getElementById(a.settings.browse_button);b=h.createElement("div");b.id=a.id+"_flash_container";
m.extend(b.style,{position:"absolute",top:"0px",background:a.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"});b.className="plupload flash";if(a.settings.container){e=h.getElementById(a.settings.container);
if(m.getStyle(e,"position")==="static"){e.style.position="relative"}}e.appendChild(b);(function(){var r,o;r='<object id="'+a.id+'_flash" type="application/x-shockwave-flash" data="'+a.settings.flash_swf_url+'" ';
if(m.ua.ie){r+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '}r+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+a.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(a.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';
if(m.ua.ie){o=h.createElement("div");b.appendChild(o);o.outerHTML=r;o=null}else{b.innerHTML=r}}());function p(){return h.getElementById(a.id+"_flash")}function d(){if(f++>5000){g({success:false});return
}if(j[a.id]===false){setTimeout(d,1)}}d();c=b=null;a.bind("Destroy",function(r){var o;m.removeAllEvents(h.body,r.id);delete j[r.id];delete i[r.id];o=h.getElementById(r.id+"_flash_container");if(o){o.parentNode.removeChild(o)
}});a.bind("Flash:Init",function(){var o={},s;try{p().setFileFilters(a.settings.filters,a.settings.multi_selection)}catch(t){g({success:false});return}if(j[a.id]){return}j[a.id]=true;a.bind("UploadFile",function(x,r){var q=x.settings,w=a.settings.resize||{};
p().uploadFile(o[r.id],q.url,{name:r.target_name||r.name,mime:m.mimeTypes[r.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:q.chunk_size,width:w.width,height:w.height,quality:w.quality,multipart:q.multipart,multipart_params:q.multipart_params||{},file_data_name:q.file_data_name,format:/\.(jpg|jpeg)$/i.test(r.name)?"jpg":"png",headers:q.headers,urlstream_upload:q.urlstream_upload})
});a.bind("CancelUpload",function(){p().cancelUpload()});a.bind("Flash:UploadProcess",function(r,v){var q=r.getFile(o[v.id]);if(q.status!=m.FAILED){q.loaded=v.loaded;q.size=v.size;r.trigger("UploadProgress",q)
}});a.bind("Flash:UploadChunkComplete",function(x,r){var q,w=x.getFile(o[r.id]);q={chunk:r.chunk,chunks:r.chunks,response:r.text};x.trigger("ChunkUploaded",w,q);if(w.status!==m.FAILED&&x.state!==m.STOPPED){p().uploadNextChunk()
}if(r.chunk==r.chunks-1){w.status=m.DONE;x.trigger("FileUploaded",w,{response:r.text})}});a.bind("Flash:SelectFiles",function(B,y){var z,A,r=[],q;for(A=0;A<y.length;A++){z=y[A];q=m.guid();o[q]=z.id;o[z.id]=q;
r.push(new m.File(q,z.name,z.size))}if(r.length){a.trigger("FilesAdded",r)}});a.bind("Flash:SecurityError",function(r,q){a.trigger("Error",{code:m.SECURITY_ERROR,message:m.translate("Security error."),details:q.message,file:a.getFile(o[q.id])})
});a.bind("Flash:GenericError",function(r,q){a.trigger("Error",{code:m.GENERIC_ERROR,message:m.translate("Generic error."),details:q.message,file:a.getFile(o[q.id])})});a.bind("Flash:IOError",function(r,q){a.trigger("Error",{code:m.IO_ERROR,message:m.translate("IO error."),details:q.message,file:a.getFile(o[q.id])})
});a.bind("Flash:ImageError",function(r,q){a.trigger("Error",{code:parseInt(q.code,10),message:m.translate("Image error."),file:a.getFile(o[q.id])})});a.bind("Flash:StageEvent:rollOver",function(v){var r,q;
r=h.getElementById(a.settings.browse_button);q=v.settings.browse_button_hover;if(r&&q){m.addClass(r,q)}});a.bind("Flash:StageEvent:rollOut",function(v){var r,q;r=h.getElementById(a.settings.browse_button);
q=v.settings.browse_button_hover;if(r&&q){m.removeClass(r,q)}});a.bind("Flash:StageEvent:mouseDown",function(v){var r,q;r=h.getElementById(a.settings.browse_button);q=v.settings.browse_button_active;if(r&&q){m.addClass(r,q);
m.addEvent(h.body,"mouseup",function(){m.removeClass(r,q)},v.id)}});a.bind("Flash:StageEvent:mouseUp",function(v){var r,q;r=h.getElementById(a.settings.browse_button);q=v.settings.browse_button_active;
if(r&&q){m.removeClass(r,q)}});a.bind("Flash:ExifData",function(r,q){a.trigger("ExifData",a.getFile(o[q.id]),q.data)});a.bind("Flash:GpsData",function(r,q){a.trigger("GpsData",a.getFile(o[q.id]),q.data)
});a.bind("QueueChanged",function(q){a.refresh()});a.bind("FilesRemoved",function(v,q){var r;for(r=0;r<q.length;r++){p().removeFile(o[q[r].id])}});a.bind("StateChanged",function(q){a.refresh()});a.bind("Refresh",function(x){var w,r,q;
p().setFileFilters(a.settings.filters,a.settings.multi_selection);w=h.getElementById(x.settings.browse_button);if(w){r=m.getPos(w,h.getElementById(x.settings.container));q=m.getSize(w);m.extend(h.getElementById(x.id+"_flash_container").style,{top:r.y+"px",left:r.x+"px",width:q.w+"px",height:q.h+"px"})
}});a.bind("DisableBrowse",function(r,q){p().disableBrowse(q)});g({success:true})})}})})(window,document,plupload);(function(c){var d={};function a(e){return plupload.translate(e)||e}function b(f,e){e.contents().each(function(g,h){h=c(h);if(!h.is(".plupload")){h.remove()}});e.prepend('<div class="plupload_wrapper plupload_scroll"><div id="'+f+'_container" class="plupload_container"><div class="plupload"><div class="plupload_header"><div class="plupload_header_content"><div class="plupload_header_title">'+a("Select files")+'</div><div class="plupload_header_text">'+a("Add files to the upload queue and click the start button.")+'</div></div></div><div class="plupload_content"><div class="plupload_filelist_header"><div class="plupload_file_name">'+a("Filename")+'</div><div class="plupload_file_action">&nbsp;</div><div class="plupload_file_status"><span>'+a("Status")+'</span></div><div class="plupload_file_size">'+a("Size")+'</div><div class="plupload_clearer">&nbsp;</div></div><ul id="'+f+'_filelist" class="plupload_filelist"></ul><div class="plupload_filelist_footer"><div class="plupload_file_name"><div class="plupload_buttons"><a href="#" class="plupload_button plupload_add">'+a("Add files")+'</a><a href="#" class="plupload_button plupload_start">'+a("Start upload")+'</a></div><span class="plupload_upload_status"></span></div><div class="plupload_file_action"></div><div class="plupload_file_status"><span class="plupload_total_status">0%</span></div><div class="plupload_file_size"><span class="plupload_total_file_size">0 b</span></div><div class="plupload_progress"><div class="plupload_progress_container"><div class="plupload_progress_bar"></div></div></div><div class="plupload_clearer">&nbsp;</div></div></div></div></div><input type="hidden" id="'+f+'_count" name="'+f+'_count" value="0" /></div>')}c.fn.pluploadQueue=function(e){if(e){this.each(function(){var j,i,k;i=c(this);k=i.attr("id");if(!k){k=plupload.guid();i.attr("id",k)}j=new plupload.Uploader(c.extend({dragdrop:true,container:k},e));d[k]=j;function h(l){var n;if(l.status==plupload.DONE){n="plupload_done"}if(l.status==plupload.FAILED){n="plupload_failed"}if(l.status==plupload.QUEUED){n="plupload_delete"}if(l.status==plupload.UPLOADING){n="plupload_uploading"}var m=c("#"+l.id).attr("class",n).find("a").css("display","block");if(l.hint){m.attr("title",l.hint)}}function f(){c("span.plupload_total_status",i).html(j.total.percent+"%");c("div.plupload_progress_bar",i).css("width",j.total.percent+"%");c("span.plupload_upload_status",i).text(a("Uploaded %d/%d files").replace(/%d\/%d/,j.total.uploaded+"/"+j.files.length))}function g(){var m=c("ul.plupload_filelist",i).html(""),n=0,l;c.each(j.files,function(p,o){l="";if(o.status==plupload.DONE){if(o.target_name){l+='<input type="hidden" name="'+k+"_"+n+'_tmpname" value="'+plupload.xmlEncode(o.target_name)+'" />'}l+='<input type="hidden" name="'+k+"_"+n+'_name" value="'+plupload.xmlEncode(o.name)+'" />';l+='<input type="hidden" name="'+k+"_"+n+'_status" value="'+(o.status==plupload.DONE?"done":"failed")+'" />';n++;c("#"+k+"_count").val(n)}m.append('<li id="'+o.id+'"><div class="plupload_file_name"><span>'+o.name+'</span></div><div class="plupload_file_action"><a href="#"></a></div><div class="plupload_file_status">'+o.percent+'%</div><div class="plupload_file_size">'+plupload.formatSize(o.size)+'</div><div class="plupload_clearer">&nbsp;</div>'+l+"</li>");h(o);c("#"+o.id+".plupload_delete a").click(function(q){c("#"+o.id).remove();j.removeFile(o);q.preventDefault()})});c("span.plupload_total_file_size",i).html(plupload.formatSize(j.total.size));if(j.total.queued===0){c("span.plupload_add_text",i).text(a("Add files."))}else{c("span.plupload_add_text",i).text(j.total.queued+" files queued.")}c("a.plupload_start",i).toggleClass("plupload_disabled",j.files.length==(j.total.uploaded+j.total.failed));m[0].scrollTop=m[0].scrollHeight;f();if(!j.files.length&&j.features.dragdrop&&j.settings.dragdrop){c("#"+k+"_filelist").append('<li class="plupload_droptext">'+a("Drag files here.")+"</li>")}}j.bind("UploadFile",function(l,m){c("#"+m.id).addClass("plupload_current_file")});j.bind("Init",function(l,m){b(k,i);if(!e.unique_names&&e.rename){c("#"+k+"_filelist div.plupload_file_name span",i).live("click",function(s){var q=c(s.target),o,r,n,p="";o=l.getFile(q.parents("li")[0].id);n=o.name;r=/^(.+)(\.[^.]+)$/.exec(n);if(r){n=r[1];p=r[2]}q.hide().after('<input type="text" />');q.next().val(n).focus().blur(function(){q.show().next().remove()}).keydown(function(u){var t=c(this);if(u.keyCode==13){u.preventDefault();o.name=t.val()+p;q.text(o.name);t.blur()}})})}c("a.plupload_add",i).attr("id",k+"_browse");l.settings.browse_button=k+"_browse";if(l.features.dragdrop&&l.settings.dragdrop){l.settings.drop_element=k+"_filelist";c("#"+k+"_filelist").append('<li class="plupload_droptext">'+a("Drag files here.")+"</li>")}c("#"+k+"_container").attr("title","Using runtime: "+m.runtime);c("a.plupload_start",i).click(function(n){if(!c(this).hasClass("plupload_disabled")){j.start()}n.preventDefault()});c("a.plupload_stop",i).click(function(n){n.preventDefault();j.stop()});c("a.plupload_start",i).addClass("plupload_disabled")});j.init();j.bind("Error",function(l,o){var m=o.file,n;if(m){n=o.message;if(o.details){n+=" ("+o.details+")"}if(o.code==plupload.FILE_SIZE_ERROR){alert(a("Error: File too large: ")+m.name)}if(o.code==plupload.FILE_EXTENSION_ERROR){alert(a("Error: Invalid file extension: ")+m.name)}m.hint=n;c("#"+m.id).attr("class","plupload_failed").find("a").css("display","block").attr("title",n)}});j.bind("StateChanged",function(){if(j.state===plupload.STARTED){c("li.plupload_delete a,div.plupload_buttons",i).hide();c("span.plupload_upload_status,div.plupload_progress,a.plupload_stop",i).css("display","block");c("span.plupload_upload_status",i).text("Uploaded "+j.total.uploaded+"/"+j.files.length+" files");if(e.multiple_queues){c("span.plupload_total_status,span.plupload_total_file_size",i).show()}}else{g();c("a.plupload_stop,div.plupload_progress",i).hide();c("a.plupload_delete",i).css("display","block")}});j.bind("QueueChanged",g);j.bind("FileUploaded",function(l,m){h(m)});j.bind("UploadProgress",function(l,m){c("#"+m.id+" div.plupload_file_status",i).html(m.percent+"%");h(m);f();if(e.multiple_queues&&j.total.uploaded+j.total.failed==j.files.length){c(".plupload_buttons,.plupload_upload_status",i).css("display","inline");c(".plupload_start",i).addClass("plupload_disabled");c("span.plupload_total_status,span.plupload_total_file_size",i).hide()}});if(e.setup){e.setup(j)}});return this}else{return d[c(this[0]).attr("id")]}}})(jQuery);TN.uploader={};TN.uploader.video=new plupload.Uploader({runtimes:"flash, html5",container:"video-uploader",max_file_size:"250mb",browse_button:"video-pickfiles",url:"http://uploader.tn.com.ar",flash_swf_url:"/sites/all/themes/leono/swf/plupload-flash.swf",chunk_size:"256Kb",filters:[{title:"Archivo de video",extensions:"mpeg4,3gpp,mov,avi,mjpg,mpeg2,mpegps,wmv,flv,mp4,3gp,mpg"}],resize:{width:320,height:240,quality:90}});
TN.uploader.video.is_enable=true;TN.uploader.video.disable=function(){$("#"+TN.uploader.video.id+"_flash_container").addClass("hidden");$("#video-pickfiles").addClass("disabled");$("#video-list .video:gt(0)").addClass("disable");
TN.uploader.video.is_enable=false};TN.uploader.video.enable=function(){$("#"+TN.uploader.video.id+"_flash_container").removeClass("hidden");$("#video-pickfiles").removeClass("disabled");$("#video-list .image").removeClass("disable");
TN.uploader.video.is_enable=true;setTimeout("TN.uploader.video.refresh();",500)};TN.uploader.video.init();TN.uploader.video.refresh();TN.uploader.video.bind("FilesAdded",function(a,b){$.each(b,function(d,c){$("#video-uploader .namefile").html(c.name+" ("+plupload.formatSize(c.size)+")")
});a.refresh();$("#video-uploader .video-status .progressbar").css("display","block");$("#video-uploader .video-status .progressbar span").css("width","0%");TN.uploader.video.start();$("#video-uploader .video-status").css("display","block");
$("#video-pickfiles").addClass("hidden");TN.uploader.image.disable()});TN.uploader.video.bind("UploadProgress",function(a,b){$("#video-uploader .progressbar span").css("width",b.percent+"%");if(b.percent==100){$("#video-uploader .progressbar").css("display","none")
}});$("#video-uploader .delete").click(function(a){$.cookie("uploadedVideos",null);$("#video-uploader .video-status").css("display","none");$("#video-pickfiles").removeClass("hidden");$("#edit-field-video-tnylg-0-value").val("");
TN.uploader.video.enable();TN.uploader.image.enable()});TN.uploader.video.bind("Error",function(a,b){switch(b.code){case -500:break;case -600:$.auto("html",function(){$("#boxContent").append(box.text("Tu archivo es demasiado grande. Podés subir videos de hasta 250 MB e imágenes hasta 10 MB."));
box.fadeIn()});break;default:$.auto("html",function(){$("#boxContent").append(box.text("Hubo un error subiendo tu archivo. Por favor, volvé a intentarlo en unos minutos."));box.fadeIn()})}a.refresh()});
TN.uploader.video.bind("FileUploaded",function(a,c,b){$.cookie("uploadedVideos",$(".video-status .namefile").html());$("#edit-field-video-tnylg-0-value").val("file://"+c.name);BASE_PATH="http://uploader.tn.com.ar/";
try{var e=jQuery.parseJSON(b.response)}catch(d){var f=false}if(f!=false){$.each(e,function(g,h){hash=g;$.each(h.encoded,function(i,j){if(j.ftp_path){$("#edit-field-video-tnylg-0-value").val(BASE_PATH+"ufe-uploaded/"+j.ftp_path+"/"+hash+"/"+hash+".json")
}})})}TN.uploader.video.disable()});TN.uploader.image=new plupload.Uploader({runtimes:"flash, html5",container:"image-uploader",max_file_size:"10mb",browse_button:"image-pickfiles",url:"/tnylagente/upload",flash_swf_url:"/sites/all/themes/leono/swf/plupload-flash.swf",filters:[{title:"Archivos de imagenes",extensions:"jpg,gif,png,jpeg"}],resize:{width:800,height:600,quality:100}});
TN.uploader.image.is_enable=true;TN.uploader.image.disable=function(){$("#"+TN.uploader.image.id+"_flash_container").addClass("hidden");$("#image-pickfiles").addClass("disabled");$("#image-list .image:gt(0)").addClass("disable");
TN.uploader.image.is_enable=false};TN.uploader.image.enable=function(){$("#"+TN.uploader.image.id+"_flash_container").removeClass("hidden");$("#image-pickfiles").removeClass("disabled");$("#image-list .image").removeClass("disable");
TN.uploader.image.is_enable=true;setTimeout("TN.uploader.image.refresh();",500)};TN.uploader.image.init();TN.uploader.image.refresh();TN.uploader.image.bind("FilesAdded",function(a,b){$.each(b,function(d,c){$("#image-list").append('<div class="image" id="'+c.id+'"><div class="namefile"> '+c.name+" ("+plupload.formatSize(c.size)+')</div><div class="progressbar"><span></span></div><div class="delete" data-id="'+c.id+'"></div>')
});a.refresh();TN.uploader.image.start();TN.uploader.video.disable()});TN.uploader.image.bind("UploadProgress",function(a,b){$("#"+b.id+" .progressbar span").css("width",b.percent+"%");if(b.percent==100){$("#"+b.id+" .progressbar").remove()
}});TN.uploader.image.bind("FileUploaded",function(a,c,b){var d=$.parseJSON(b.response);$.uploadedFiles=$("#edit-field-imagen-tnylg-hidden-0-value").val().split("||");if($.uploadedFiles.length<1){$.uploadedFiles=[]
}$.uploadedFiles.push(d.fid+"@@"+c.id);$("#edit-field-imagen-tnylg-hidden-0-value").val($.uploadedFiles.join("||"))});$("#image-uploader .delete").live("click",function(a){$.uploadedFiles=$("#edit-field-imagen-tnylg-hidden-0-value").val().split("||");
var b=$(this).data("fid");var c=$(this).data("id");if(typeof(b)!="undefined"){$.each($.uploadedFiles,function(e,d){d+="";if(d.indexOf(b)!=-1){$.uploadedFiles.splice(e,1)}});$("#"+b).remove();$("#edit-field-imagen-tnylg-hidden-0-value").val($.uploadedFiles.join("||"));
TN.uploader.image.enable()}else{if(typeof(c)!="undefined"){$.each($.uploadedFiles,function(e,d){d+="";if(d.indexOf(c)!=-1){$.uploadedFiles.splice(e,1)}});$("#"+c).remove();TN.uploader.image.total.uploaded=TN.uploader.image.total.uploaded-1;
$("#edit-field-imagen-tnylg-hidden-0-value").val($.uploadedFiles.join("||"))}}if(TN.uploader.image.files.length==1){TN.uploader.video.enable()}if($("#edit-field-imagen-tnylg-hidden-0-value").val()==""){TN.uploader.video.enable()
}$.each(TN.uploader.image.files,function(e,d){if(d.id==c){TN.uploader.image.removeFile(d.id);$("#"+d.id).remove();$("#image-list .image:eq(0)").removeClass("disable");TN.uploader.image.files.splice(e,1);
if(TN.uploader.image.is_enable==true){TN.uploader.image.refresh()}if(TN.uploader.image.files.length==0){TN.uploader.image.enable()}return false}})});var box=$('<div id="msgBox" class="pop-action"></div>');
TN.uploader.image.bind("Error",function(a,b){switch(b.code){case -500:break;case -600:$.auto("html",function(){$("#boxContent").append(box.text("Tu archivo es demasiado grande. Podés subir videos de hasta 250 MB e imágenes hasta 10 MB."));
box.fadeIn()});break;default:$.auto("html",function(){$("#boxContent").append(box.text("Hubo un error subiendo tu archivo. Por favor, volvé a intentarlo en unos minutos."));box.fadeIn()})}a.refresh()});
TN.uploader.is_finished=function(){if((TN.uploader.image.files.length===(TN.uploader.image.total.uploaded+TN.uploader.image.total.failed))&&(TN.uploader.video.files.length===(TN.uploader.video.total.uploaded+TN.uploader.video.total.failed))){return true
}else{return false}};$("form.publish").submit(function(){if(TN.uploader.is_finished()==true){return true}if((TN.uploader.video.files.length>0)||(TN.uploader.image.files.length>0)){TN.uploader.video.bind("StateChanged",function(){if(TN.uploader.is_finished()==true){$("form.publish").submit();
$("#boxclose").click()}});TN.uploader.image.bind("StateChanged",function(){if(TN.uploader.is_finished()==true){$("form.publish").submit();$("#boxclose").click()}});$.auto("html",function(){$("#boxContent").append(box.text("Tus archivos se están subiendo. Al terminar la carga, se publicará tu nota."));
box.fadeIn()})}else{return true}return false});if($("#edit-field-imagen-tnylg-hidden-0-value").val()!=""){TN.uploader.video.disable()}if($("#edit-field-video-tnylg-0-value").val()!=""){TN.uploader.image.disable();
TN.uploader.video.disable()}jQuery.extend(Drupal.settings,{basePath:"/",fbconnect:{user_pictures:"allow",language_code:"es_LA",app_id:"346699902992",debug:0,connect_js:"document.location.protocol + '//connect.facebook.net/es_LA/all.js'",loginout_mode:"manual",invite_name:"Todo Noticias",fast_reg_mode:1,fast_reg_autoname:1,omit_fb_init_code:true,fbuid:"548667561",user:{uid:"1",fbuid:null}},ckeditor:{teaser:"edit-body",module_path:"/sites/all/modules/contrib/ckeditor",theme:["garland","garland"],settings:{"edit-body":{customConfig:"/sites/all/modules/contrib/ckeditor/ckeditor.config.js?1338208892",defaultLanguage:"en",toolbar:"TN",enterMode:1,shiftEnterMode:2,toolbarStartupExpanded:true,width:"100%",height:420,skin:"kama",format_tags:"p;div;pre;address;h1;h2;h3;h4;h5;h6",scayt_autoStartup:false,stylesCombo_stylesSet:"drupal:/sites/all/modules/contrib/ckeditor/ckeditor.styles.js",contentsCss:["/themes/garland/style.css?U","/sites/all/modules/contrib/ckeditor/ckeditor.css?U"]},"edit-field-bajada-tnylg-0-value":{customConfig:"/sites/all/modules/contrib/ckeditor/ckeditor.config.js?1338208892",defaultLanguage:"en",toolbar:"TN",enterMode:1,shiftEnterMode:2,toolbarStartupExpanded:true,width:"100%",height:182,skin:"kama",format_tags:"p;div;pre;address;h1;h2;h3;h4;h5;h6",scayt_autoStartup:false,stylesCombo_stylesSet:"drupal:/sites/all/modules/contrib/ckeditor/ckeditor.styles.js",contentsCss:["/themes/garland/style.css?U","/sites/all/modules/contrib/ckeditor/ckeditor.css?U"]}},autostart:{"edit-body":true,"edit-field-bajada-tnylg-0-value":true}},HierarchicalSelect:{basePath:"/",getArguments:"",settings:{"12":{animationDelay:400,cacheId:"hs_taxonomy_1___",renderFlatSelect:0,createNewItems:0,createNewLevels:0,resizable:0,path:"hierarchical_select_json"}}},filefield:{field_imagen_tnylg:"png gif jpg jpeg"},ahah:{"edit-field-imagen-tnylg-0-filefield-upload":{url:"/filefield/ahah/tnylagente/field_imagen_tnylg/0",event:"mousedown",keypress:true,wrapper:"edit-field-imagen-tnylg-0-ahah-wrapper",selector:"#edit-field-imagen-tnylg-0-filefield-upload",effect:"fade",method:"replace",progress:{type:"throbber"},button:{op:"Subir"}},"edit-field-imagen-tnylg-0-filefield-remove":{url:"/filefield/ahah/tnylagente/field_imagen_tnylg/0",event:"mousedown",keypress:true,wrapper:"edit-field-imagen-tnylg-0-ahah-wrapper",selector:"#edit-field-imagen-tnylg-0-filefield-remove",effect:"fade",method:"replace",progress:{type:"throbber"},button:{field_imagen_tnylg_0_filefield_remove:"Eliminar"}},"edit-field-imagen-tnylg-field-imagen-tnylg-add-more":{url:"/content/js_add_more/tnylagente/field_imagen_tnylg",event:"mousedown",keypress:true,wrapper:"field-imagen-tnylg-items",selector:"#edit-field-imagen-tnylg-field-imagen-tnylg-add-more",effect:"fade",method:"replace",progress:{type:"throbber"},button:{field_imagen_tnylg_add_more:"Add another item"}}},teaserCheckbox:{"edit-teaser-js":"edit-teaser-include"},teaser:{"edit-teaser-js":"edit-body"},tableDrag:{field_imagen_tnylg_values:{"field_imagen_tnylg-delta-order":[{target:"field_imagen_tnylg-delta-order",source:"field_imagen_tnylg-delta-order",relationship:"sibling",action:"order",hidden:true,limit:0}]}}});